<!doctype html>
<html lang="fr">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Stages</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous">
</head>

<body>


    <?php

        $host = 'localhost';
        $login = 'root';
        $password = '';
        $bdsql = new PDO('mysql:host='.$host.';dbname=stages', $login, $password);

    ?>

    <div class="navbar navbar-expand-lg">
        <ul class="navbar-nav">
            <li class="nav-item">
                <a class="nav-link" href="index.html">Accueil</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="consulter.html">Consulter</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="ajouter.html">Ajouter</a>
            </li>

        </ul>
    </div>

    <div class="container">

        <h1 class="text-center">Consulter</h1>
        <br>

        <p>le type d'information à consulter</p>
        <select class="form-select" id="type_consultation" onchange="afficher()">
            <option selected>choisir le type de consultation</option>
            <option value="1">Consulter les étudiants</option>
            <option value="3">Consulter les entreprises</option>
        </select>
        <div id="affichage_etudiant" class="card">
            <div class="card-header">
                <h3>Stages</h3>
            </div>
            <div class="card-body">
                <table class="table table-striped">
                    <thead>
                        <tr>
                            <th scope="col">Nom</th>
                            <th scope="col">Prénom</th>
                            <th scope="col">Année</th>
                            <th scope="col">Entreprise</th>
                            <th scope="col">adresse</th>
                            <th scope="col">Date début</th>
                            <th scope="col">Date fin</th>
                        </tr>
                    </thead>
                    <tbody>
                        <?php
                        

                        $sql = "SELECT * FROM etudiant";
                        $result = $bdsql->query($sql);
                        $result->setFetchMode(PDO::FETCH_ASSOC);

                        while ($row = $result->fetch()) {
                            echo "<tr>";
                            echo "<td>".$row['nom']."</td>";
                            echo "<td>".$row['prenom']."</td>";
                            echo "<td>".$row['annee']."</td>";
                            echo "<td>".$row['entreprise']."</td>";
                            echo "<td>".$row['adresse']."</td>";
                            echo "<td>".$row['date_debut']."</td>";
                            echo "<td>".$row['date_fin']."</td>";
                            echo "</tr>";
                        }

                        ?>


                    </tbody>
                </table>
            </div>

        </div>

        <div id="affichage_entreprise" class="card">
            <div class="card-header">
                <h3>Stages</h3>
            </div>
            <div class="card-body">
                <table class="table table-striped">
                    <thead>
                        <tr>
                            <th scope="col">Nom</th>
                            <th scope="col">Prénom</th>
                            <th scope="col">Entreprise</th>
                            <th scope="col">année</th>
                        </tr>
                    </thead>
                    <tbody>
                        <?php

                        //$sql = "SELECT * FROM entreprise";
                        //$result = $bdsql->query($sql);
                        //$result->setFetchMode(PDO::FETCH_ASSOC);


                        result = [nom => "nom1", prenom => "prenom1", entreprise => "entreprise1", annee => "annee1"], [nom => "nom2", prenom => "prenom2", entreprise => "entreprise2", annee => "annee2"], [nom => "nom3", prenom => "prenom3", entreprise => "entreprise3", annee => "annee3"]];

                        while ($row = $result->fetch()) {
                            echo "<tr>";
                            echo "<td>".$row['nom']."</td>";
                            echo "<td>".$row['prenom']."</td>";
                            echo "<td>".$row['entreprise']."</td>";
                            echo "<td>".$row['annee']."</td>";

                            echo "<a class="btn btn-primary" data-bs-toggle="offcanvas" href="#offcanvasExample" role="button" aria-controls="offcanvasExample"> afficher plus</a>";
                            echo "<div class="offcanvas offcanvas-start" tabindex="-1" id="offcanvasExample" aria-labelledby="offcanvasExampleLabel">";
                            echo "<div class="offcanvas-header">";
                            echo "  <h5 class="offcanvas-title" id="offcanvasExampleLabel">Stage : </h5>";
                            echo "  <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>";
                            echo "</div>";
                            echo "<div class="offcanvas-body">
                            echo "    <div class="d-flex flex-row bd-highlight mb-3">";
                            echo "        <div class="p-2 bd-highlight">Nom : </div>";
                            echo "        <div class="p-2 bd-highlight"><?php echo $row['nom']; ?>
                        echo "
            </div>";
            echo "
        </div>";
        echo " <div class="d-flex flex-row bd-highlight mb-3">";
            echo " <div class="p-2 bd-highlight">Prénom : </div>";
            echo " <div class="p-2 bd-highlight">
                <?php echo $row['prenom']; ?>
            </div>";
            echo " </div>";
        echo " <div class="d-flex flex-row bd-highlight mb-3">";
            echo " <div class="p-2 bd-highlight">Entreprise : </div>";
            echo " <div class="p-2 bd-highlight">
                <?php echo $row['entreprise']; ?>
            </div>";
            echo " </div>";
        echo " <div class="d-flex flex-row bd-highlight mb-3">";
            echo " <div class="p-2 bd-highlight">Année : </div>";
            echo " <div class="p-2 bd-highlight">
                <?php echo $row['annee']; ?>
            </div>";
            echo " </div>";
        echo " <div class="d-flex flex-row bd-highlight mb-3">";
            echo " <div class="p-2 bd-highlight">Adresse : </div>";
            echo " <div class="p-2 bd-highlight">
                <?php echo $row['adresse']; ?>
            </div>";
            echo " </div>";
        echo " <div class="d-flex flex-row bd-highlight mb-3">";
            echo " <div class="p-2 bd-highlight">Date début : </div>";
            echo " <div class="p-2 bd-highlight">
                <?php echo $row['date_debut']; ?>
            </div>";
            echo " </div>";
        echo " <div class="d-flex flex-row bd-highlight mb-3">";
            echo " <div class="p-2 bd-highlight">Date fin : </div>";
            echo " <div class="p-2 bd-highlight">
                <?php echo $row['date_fin']; ?>
            </div>";
            echo " </div>";
        echo "
    </div>";
    echo "</div>";
    echo "</tr>";
    }
    ?>
    </tbody>

























    <tr>


        </div>
        </div>
        </div>

    </tr>
    </tbody>
    </table>
    </div>




    <script type="text/javascript">

        document.getElementById("affichage_etudiant").style.display = "none";
        document.getElementById("affichage_entreprise").style.display = "none";




        function afficher() {
            if (document.getElementById("type_consultation").value == 1) {
                document.getElementById("affichage_etudiant").style.display = "block";
                document.getElementById("affichage_entreprise").style.display = "none";
            } else {
                document.getElementById("affichage_etudiant").style.display = "none";
                document.getElementById("affichage_entreprise").style.display = "block";
            }


        }





    </script>





    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-w76AqPfDkMBDXo30jS1Sgez6pr3x5MlQ1ZAGC+nuZB+EYdgRZgiwxhTBTkF7CXvN"
        crossorigin="anonymous"></script>
</body>

</html>